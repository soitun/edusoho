!function(e){function t(t){for(var a,o,i=t[0],c=t[1],d=t[2],u=0,p=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(l&&l(t);p.length;)p.shift()();return n.push.apply(n,d||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},s={322:0},n=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/static-dist/";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var l=c;n.push([1552,0]),r()}({1552:function(e,t,r){"use strict";r.r(t);var a=r(4),s=r.n(a),n=r(5),o=r.n(n),i=r(183),c=r(8),d=$(".js-time-left"),l=$(".js-sms-send"),u=$(".js-fetch-btn-text"),p=function e(){var t=d.text();d.html(t-1),t-1>0?(l.attr("disabled",!0),setTimeout(e,1e3)):(d.html(""),u.html(Translator.trans("oauth.send.validate_message")),l.removeAttr("disabled"))},h=r(53),g=r(84),m=r(126);new(function(){function e(){s()(this,e),this.$form=$("#third-party-create-account-form"),this.$btn=$(".js-submit-btn"),this.validator=null,this.dragCaptchaToken="",this.smsToken=null,this.$sendBtn=$(".js-sms-send"),this.drag=!!$("#drag-btn").length&&new g.a($("#drag-btn"),$(".js-jigsaw"),{limitType:"bind_register"}),this.init()}return o()(e,[{key:"init",value:function(){this.setValidateRule(),this.initValidator(),this.smsSend(),this.submitForm(),this.removeSmsErrorTip(),this.dragEvent(),this.clickEvent(),this.initRegisterVisitIdField()}},{key:"setValidateRule",value:function(){$.validator.addMethod("spaceNoSupport",(function(e,t){return e.indexOf(" ")<0}),$.validator.format(Translator.trans("validate.have_spaces")))}},{key:"dragEvent",value:function(){var e=this;this.drag&&this.drag.on("success",(function(t){e.$sendBtn.attr("disabled",!1),e.dragCaptchaToken=t.token})),$(".js-drag-jigsaw").hasClass("hidden")||this.addDragCaptchaRules()}},{key:"clickEvent",value:function(){$(".js-password-open-eye").on("click",(function(){$("#password").attr("type","password"),$(".js-password-open-eye").hide(),$(".js-password-close-eye").show()})),$(".js-password-close-eye").on("click",(function(){$("#password").attr("type","text"),$(".js-password-close-eye").hide(),$(".js-password-open-eye").show()})),$(".js-confirm-password-open-eye").on("click",(function(){$("#confirmPassword").attr("type","password"),$(".js-confirm-password-open-eye").hide(),$(".js-confirm-password-close-eye").show()})),$(".js-confirm-password-close-eye").on("click",(function(){$("#confirmPassword").attr("type","text"),$(".js-confirm-password-close-eye").hide(),$(".js-confirm-password-open-eye").show()})),$(".js-original-account-password-open-eye").on("click",(function(){$("#originalAccountPassword").attr("type","password"),$(".js-original-account-password-open-eye").hide(),$(".js-original-account-password-close-eye").show()})),$(".js-original-account-password-close-eye").on("click",(function(){$("#originalAccountPassword").attr("type","text"),$(".js-original-account-password-close-eye").hide(),$(".js-original-account-password-open-eye").show()}))}},{key:"initValidator",value:function(){$.validator.addMethod("sms_code_required",(function(e,t){return!!($("#originalMobileAccount").val()&&e||!$("#originalMobileAccount").val())}),$.validator.format(Translator.trans("auth.mobile_captcha_required_error_hint"))),$.validator.addMethod("account_password",(function(e,t){return!!($("#originalEmailAccount").val()&&e||!$("#originalMobileAccount").val())}),$.validator.format(Translator.trans("auth.login.password_required_error_hint"))),this.rules={username:{required:!0,byte_minlength:4,byte_maxlength:18,nickname:!0,chinese_alphanumeric:!0,es_remote:{type:"get"}},invitedCode:{required:!1,reg_inviteCode:!0,es_remote:{type:"get"}},password:{required:!0,check_password_high:!0},confirmPassword:{required:!0,equalTo:"#password"},sms_code:{required:!0,unsigned_integer:!0,rangelength:[6,6]},agree_policy:{required:!0},originalMobileAccount:{required:!1,phone:!0,es_remote:{type:"get",callback:function(e){e?$(".js-sms-send").removeAttr("disabled"):$(".js-sms-send").attr("disabled","true")}}},originalEmailAccount:{required:!1,email:!0,es_remote:{type:"get"}},originalAccountPassword:{required:!1,account_password:!0},accountSmsCode:{required:!1,sms_code_required:!0,unsigned_integer:!0,rangelength:[6,6]}},this.validator=this.$form.validate({highlight:function(e){$(e).css("border-bottom","1px solid red"),"password"===e.name&&$(".js-password-tip").hide()},success:function(e,t){$(t).css("border-bottom","1px solid #e1e1e1"),"password"===t.name&&$(".js-password-tip").show()},rules:this.rules,messages:{sms_code:{required:Translator.trans("site.captcha_code.required"),rangelength:Translator.trans("validate.sms_code.message")},agree_policy:{required:Translator.trans("validate.valid_policy_input.message")},password:{required:Translator.trans("validate.check_password_high.message")}}})}},{key:"smsSend",value:function(){var e=this,t=this,r=$("#captcha_code");this.$sendBtn.length&&this.$sendBtn.click((function(a){t.smsSended||($.ajaxSetup({global:!1}),t.smsSended=!0);var s=(new m.a).getCoordinate(a,$("meta[name=csrf-token]").attr("content"));t.$sendBtn.attr("disabled",!0);var n=$(a.currentTarget).data("type"),o={type:n,unique:"register"===n?1:0,mobile:"register"===n?$(".js-account").text():$("#originalMobileAccount").val(),dragCaptchaToken:e.dragCaptchaToken,encryptedPoint:s,phrase:r.val()};h.a.sms.send({data:o}).then((function(t){var r;$.ajaxSetup({global:!0}),e.smsToken=t.smsToken,r=120,d.html(r),u.html(Translator.trans("site.data.get_sms_code_again_btn")),Object(c.a)("success",Translator.trans("site.data.get_sms_code_success_hint")),p()})).catch((function(e){t.drag&&($.ajaxSetup({global:!0}),t.addDragCaptchaRules(),t.drag.initDragCaptcha(),$(".js-drag-jigsaw").removeClass("hidden"))}))}))}},{key:"submitForm",value:function(){var e=this;this.$btn.click((function(t){var r=$(t.target);if(e.validator.form()){r.button("loading");var a={nickname:$("#username").val(),password:$("#password").val(),mobile:$(".js-account").html(),smsToken:e.smsToken,smsCode:$("#sms-code").val(),captchaToken:e.captchaToken,phrase:$("#captcha_code").val(),dragCaptchaToken:$('[name="dragCaptchaToken"]').val(),invitedCode:$("#invitedCode").length>0?$("#invitedCode").val():"",registerVisitId:$('[name="registerVisitId"]').val(),originalMobileAccount:$('[name="originalMobileAccount"]').val(),accountSmsCode:$('[name="accountSmsCode"]').val(),originalEmailAccount:$('[name="originalEmailAccount"]').val(),originalAccountPassword:$('[name="originalAccountPassword"]').val()},s=Translator.trans("oauth.send.sms_code_error_tip");$.post(r.data("url"),a,(function(e){r.button("reset"),1===e.success?window.location.href=e.url:$(".js-password-error").length||r.prev().addClass("has-error").append('<p id="password-error" class="form-error-message js-password-error">'.concat(s,"</p>"))})).error((function(e){r.button("reset")}))}})),Object(i.a)(this.$form,this.$btn)}},{key:"addDragCaptchaRules",value:function(){$('[name="dragCaptchaToken"]').rules("add",{required:!0,messages:{required:Translator.trans("auth.register.drag_captcha_tips")}})}},{key:"removeSmsErrorTip",value:function(){$("#sms-code").focus((function(){var e=$(".js-password-error");e.length&&e.remove()}))}},{key:"initRegisterVisitIdField",value:function(){$(document).ready((function(){"undefined"!==window._VISITOR_ID&&$('[name="registerVisitId"]').val(window._VISITOR_ID)}))}}]),e}())},183:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a=function(e,t){e.keypress((function(e){13==e.which&&(t.trigger("click"),e.preventDefault())}))}},35:function(e,t){e.exports=jQuery}});