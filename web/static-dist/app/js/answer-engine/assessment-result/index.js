!function(e){function t(t){for(var a,i,s=t[0],c=t[1],l=t[2],d=0,m=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={141:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/static-dist/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;o.push([1518,0]),n()}({1518:function(e,t,n){"use strict";n.r(t);var a=n(16),r=n.n(a),o={data:function(){return{questionFavorites:[],showCKEditorData:{publicPath:$("[name=ckeditor_path]").val(),filebrowserImageUploadUrl:$("[name=ckeditor_image_upload_url]").val(),filebrowserImageDownloadUrl:$("[name=ckeditor_image_download_url]").val(),language:"zh_CN"===document.documentElement.lang?"zh-cn":document.documentElement.lang,jqueryPath:$("[name=jquery_path]").val()},showAttachment:$("[name=show_attachment]").val(),cdnHost:$("[name=cdn_host]").val(),isErrorCorrection:$("[name=is_error_correction]").val(),fileId:0,metaActivity:{},isDownload:"1"===JSON.parse($("[name=question_bank_attachment_setting]").val()).enable}},created:function(){var e=this;$.ajax({url:"/api/answer_record/"+$("[name='answer_record_id']").val(),type:"GET",async:!1,headers:{Accept:"application/vnd.edusoho.v2+json"},beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content")),e.setRequestHeader("X-Requested-With","XMLHttpRequest")}}).done((function(t){e.metaActivity=t.metaActivity,e.assessment=t.assessment,e.answerReport=t.answer_report,e.answerRecord=t.answer_record,e.answerScene=t.answer_scene}))},methods:{deleteAttachment:function(e,t){t&&(this.fileId=e)},previewAttachment:function(e){this.fileId=e},downloadAttachment:function(e){this.fileId=e},previewAttachmentCallback:function(){var e=this,t=this;return new r.a((function(n){$.ajax({url:$("[name=preview-attachment-url]").val(),type:"post",data:{id:e.fileId},beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))}}).done((function(e){e.data.sdkBaseUri=app.cloudSdkBaseUri,e.data.disableDataUpload=app.cloudDisableLogReport,e.data.disableSentry=app.cloudDisableLogReport,n(e),t.fileId=0}))}))},downloadAttachmentCallback:function(){var e=this,t=this;return new r.a((function(n){$.ajax({url:$("[name=download-attachment-url]").val(),type:"post",data:{id:e.fileId},beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))}}).done((function(e){n(e),t.fileId=0}))}))},deleteAttachmentCallback:function(){var e=this,t=this;return new r.a((function(n){$.ajax({url:$("[name=delete-attachment-url]").val(),type:"post",data:{id:e.fileId},beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))}}).done((function(e){n(e),t.fileId=0}))}))},errorCorrection:function(e){var t=$("[name='answer_record_id']").val();$.ajax({url:"/api/answerRecord/".concat(t,"/fillAnswer"),type:"POST",async:!1,headers:{Accept:"application/vnd.edusoho.v2+json"},data:e,beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content")),e.setRequestHeader("X-Requested-With","XMLHttpRequest")}}).done((function(e){console.log(e)}))}}},i=n(22),s=Object(i.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ibs-vue",attrs:{id:"app"}},[n("assessment-result",{attrs:{metaActivity:e.metaActivity,answerReport:e.answerReport,assessment:e.assessment,answerRecord:e.answerRecord,answerScene:e.answerScene,isDownload:e.isDownload,showCKEditorData:e.showCKEditorData,showAttachment:e.showAttachment,cdnHost:e.cdnHost,previewAttachmentCallback:e.previewAttachmentCallback,downloadAttachmentCallback:e.downloadAttachmentCallback,"is-error-correction":e.isErrorCorrection},on:{previewAttachment:e.previewAttachment,downloadAttachment:e.downloadAttachment,"error-correction":e.errorCorrection}})],1)}),[],!1,null,null,null).exports,c={name:"assessment-result",components:{itemReport:n(312).a},props:{metaActivity:{type:Object,default:function(){return{}}},isDownload:{type:Boolean,default:!1},assessment:{type:Object,default:function(){return{}}},answerReport:{type:Object,default:function(){return{}}},answerRecord:{type:Object,default:function(){return{}}},answerScene:{type:Object,default:function(){return{}}},questionFavorites:{type:Array,default:function(){return[]}},cdnHost:{type:String,default:"service-cdn.qiqiuyun.net"},previewAttachmentCallback:{type:Function,default:function(){return new r.a((function(e){e()}))}},downloadAttachmentCallback:{type:Function,default:function(){return new r.a((function(e){e()}))}},isErrorCorrection:{type:String,default:"0"}},methods:{previewAttachment:function(e){this.$emit("previewAttachment",e)},downloadAttachment:function(e){this.$emit("downloadAttachment",e)},errorCorrection:function(e){this.$emit("error-correction",e)}}},l=Object(i.a)(c,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("item-report",{attrs:{answerShow:"show",assessmentStatus:"finished",metaActivity:e.metaActivity,assessment:e.assessment,cdnHost:e.cdnHost,questionFavorites:e.questionFavorites,answerRecord:e.answerRecord,answerScene:e.answerScene,isDownload:e.isDownload,answerReport:e.answerReport,isErrorCorrection:e.isErrorCorrection,previewAttachmentCallback:e.previewAttachmentCallback,downloadAttachmentCallback:e.downloadAttachmentCallback,isShowAiAnalysis:!1},on:{previewAttachment:e.previewAttachment,downloadAttachment:e.downloadAttachment,"error-correction":e.errorCorrection}})}),[],!1,null,null,null).exports;jQuery.support.cors=!0,Vue.config.productionTip=!1,Vue.component(l.name,l),new Vue({render:function(e){return e(s)}}).$mount("#app")},312:function(e,t,n){"use strict";var a=n(16),r=n.n(a),o=n(163),i=n(162),s=n(55),c=n(43),l={name:"item-report",mixins:[s.a,c.a],data:function(){return{time:null,timeMeter:null,flag:!1,visible:!1,closable:!1,redoInterval:Number(this.answerScene.redo_interval),doTimes:Number(this.answerScene.do_times),finishedTime:1e3*Number(this.answerReport.review_time)}},components:{itemEngine:i.a},props:{exercise:{type:Object,default:function(){return{}}},metaActivity:{type:Object,default:function(){return{}}},courseSetStatus:{type:String,default:"1"},answerReport:{type:Object,default:function(){return{}}},assessment:{type:Object,default:function(){return{}}},answerRecord:{type:Object,default:function(){return{}}},answerScene:{type:Object,default:function(){return{}}},answerShow:{type:String,default:function(){return"show"}},assessmentStatus:{type:String,default:function(){return""}},questionFavorites:{type:Array,default:function(){return[]}},cdnHost:{type:String,default:"service-cdn.qiqiuyun.net"},previewAttachmentCallback:{type:Function,default:function(){return new r.a((function(e){e()}))}},downloadAttachmentCallback:{type:Function,default:function(){return new r.a((function(e){e()}))}},Collect:{type:Boolean,default:!0},showCKEditorData:{type:Object,default:function(){return{}}},showDoAgainBtn:{type:Number,default:1},isErrorCorrection:{type:String,default:"0"},isDownload:{type:Boolean,default:!1},assessmentResponses:{type:Object,default:function(){return{}}},isShowAiAnalysis:{type:Boolean,default:!0}},computed:{timeCount:function(){return this.finishedTime+60*this.redoInterval*1e3-Date.parse(new Date)}},created:function(){this.$on("doAgain",this.doAgain)},mounted:function(){"finished"===this.answerRecord.status&&this.redoInterval&&!this.doTimes&&this.timeCount>0?this.timer():this.flag=!0},methods:{doAgain:function(){this.flag?this.$emit("doAgainEvent"):this.visible=!0},timer:function(){var e=this,t=0,n=this.timeCount;this.timeMeter=setInterval((function(){var a=Object(o.a)(n,t++),r=a.hours,i=a.minutes,s=a.seconds;e.time="".concat(r,":").concat(i,":").concat(s),console.log(e.time),(0==Number(r)&&0==Number(i)&&0==Number(s)||Number(s)<0)&&(e.flag=!0,e.clearTime(),e.visible=!1)}),1e3)},clearTime:function(){clearInterval(this.timeMeter),this.timeMeter=null},handleOk:function(){this.visible=!1},getContainer:function(){return document.getElementById("item-bank-sdk-message")},collectUpdateEvent:function(e){this.$emit("favoriteEvent",e),this.dispatch("assessment-result","favoriteEvent",e)},cancelCollectEvent:function(e){this.$emit("cancelFavoriteEvent",e),this.dispatch("assessment-result","cancelFavoriteEvent",e)},previewAttachment:function(e){this.$emit("previewAttachment",e)},downloadAttachment:function(e){this.$emit("downloadAttachment",e)},errorCorrection:function(e){this.$emit("error-correction",e)},getAiAnalysis:function(e,t){this.$emit("getAiAnalysis",e,t)},stopAiAnalysis:function(e){this.$emit("stopAiAnalysis",e)}}},u=n(22),d=Object(u.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("item-engine",{attrs:{mode:"report",metaActivity:e.metaActivity,answerShow:e.answerShow,answerReport:e.answerReport,assessment:e.assessment,answerRecord:e.answerRecord,answerScene:e.answerScene,cdnHost:e.cdnHost,isDownload:e.isDownload,assessmentStatus:e.assessmentStatus,questionFavorites:e.questionFavorites,Collect:e.Collect,exercise:e.exercise,showCKEditorData:e.showCKEditorData,isErrorCorrection:e.isErrorCorrection,assessmentResponses:e.assessmentResponses,previewAttachmentCallback:e.previewAttachmentCallback,downloadAttachmentCallback:e.downloadAttachmentCallback,showDoAgainBtn:e.showDoAgainBtn,courseSetStatus:e.courseSetStatus,isShowAiAnalysis:e.isShowAiAnalysis},on:{collectUpdateEvent:e.collectUpdateEvent,cancelCollectEvent:e.cancelCollectEvent,previewAttachment:e.previewAttachment,downloadAttachment:e.downloadAttachment,"error-correction":e.errorCorrection,getAiAnalysis:e.getAiAnalysis,stopAiAnalysis:e.stopAiAnalysis},scopedSlots:e._u([{key:"returnBtn",fn:function(){return[e._t("returnBtn")]},proxy:!0}],null,!0)}),e._v(" "),"finished"!==e.assessmentStatus?n("a-modal",{attrs:{title:e.t("itemReport.DoAgain_tip"),visible:e.visible,closable:e.closable,getContainer:e.getContainer}},[n("p",[n("span",{staticClass:"ibs-warning-color"},[n("i",{staticClass:"ib-icon ib-icon-info ibs-mr8"}),e._v(e._s(e.t("itemReport.DoAagin_time")))]),n("span",{staticClass:"ibs-text-medium ibs-ml8"},[e._v(e._s(e.time))])]),e._v(" "),n("template",{slot:"footer"},[n("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("\n        "+e._s(e.t("itemReport.DoAagin_know"))+"\n      ")])],1)],2):e._e()],1)}),[],!1,null,null,null);t.a=d.exports}});