/*! For license information please see index.js.LICENSE.txt */
!function(t){function e(e){for(var r,i,s=e[0],c=e[1],u=e[2],f=0,h=[];f<s.length;f++)i=s[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);for(l&&l(e);h.length;)h.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},o={143:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/static-dist/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;a.push([1527,0]),n()}({1527:function(t,e,n){"use strict";n.r(e);n(344);var r=n(239),o=n(26),a=n.n(o),i=n(19),s=n.n(i),c=n(37),u=n.n(c),l=n(13),f=n.n(l),h=n(24),d=n.n(h),p=n(20),m=n.n(p),v=n(16),w=n.n(v),y=n(25),g=n.n(y),b=n(23),_=n.n(b),A=n(14),S=n.n(A),E=n(88);function x(){x=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=m.a||function(t,e,n){t[e]=n.value},i="function"==typeof d.a?d.a:{},c=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",h=i.toStringTag||"@@toStringTag";function p(t,e,n){return m()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(t){p=function(t,e,n){return t[e]=n}}function v(t,e,n,r){var a=e&&e.prototype instanceof S?e:S,i=f()(a.prototype),s=new I(r||[]);return o(i,"_invoke",{value:T(t,n,s)}),i}function y(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=v;var g="suspendedStart",b="executing",_="completed",A={};function S(){}function E(){}function k(){}var C={};p(C,c,(function(){return this}));var R=u.a,$=R&&R(R(N([])));$&&$!==n&&r.call($,c)&&(C=$);var j=k.prototype=S.prototype=f()(C);function L(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,a,i,c){var u=y(t[o],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==s()(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(f).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return a=a?a.then(o,o):o()}})}function T(e,n,r){var o=g;return function(a,i){if(o===b)throw Error("Generator is already running");if(o===_){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var s=r.delegate;if(s){var c=D(s,r);if(c){if(c===A)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===g)throw o=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=b;var u=y(e,n,r);if("normal"===u.type){if(o=r.done?_:"suspendedYield",u.arg===A)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=_,r.method="throw",r.arg=u.arg)}}}function D(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,D(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),A;var a=y(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,A;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,A):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function q(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(q,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[c];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(s()(e)+" is not iterable")}return E.prototype=k,o(j,"constructor",{value:k,configurable:!0}),o(k,"constructor",{value:E,configurable:!0}),E.displayName=p(k,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return a.a?a()(t,k):(t.__proto__=k,p(t,h,"GeneratorFunction")),t.prototype=f()(j),t},e.awrap=function(t){return{__await:t}},L(O.prototype),p(O.prototype,l,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,a){void 0===a&&(a=w.a);var i=new O(v(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(j),p(j,h,"Generator"),p(j,c,(function(){return this})),p(j,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(F),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,A):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),A},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),F(n),A}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;F(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),A}},e}var k={data:function(){return{collect:1==$("[name='collect']").val(),answerShow:$("[name=answer_show]").val(),showCKEditorData:{publicPath:$("[name=ckeditor_path]").val(),filebrowserImageUploadUrl:$("[name=ckeditor_image_upload_url]").val(),filebrowserImageDownloadUrl:$("[name=ckeditor_image_download_url]").val(),language:"zh_CN"===document.documentElement.lang?"zh-cn":document.documentElement.lang,jqueryPath:$("[name=jquery_path]").val()},courseSetStatus:"",showAttachment:$("[name=show_attachment]").val(),cdnHost:$("[name=cdn_host]").val(),fileId:0,showDoAgainBtn:void 0===$("[name=show_do_again_btn]").val()?1:S()($("[name=show_do_again_btn]").val()),showReturnBtn:void 0===$("[name=submit_return_url]").val()?0:$("[name=submit_return_url]").val().length,isDownload:"1"===JSON.parse($("[name=question_bank_attachment_setting]").val()).enable,assessmentResponses:{},exercise:{}}},provide:function(){return{modeOrigin:"do"}},created:function(){var t=location.pathname.match(/\/([^\/]+)\/([^\/]+)/),e=t[1],n=t[2];"course"==e&&this.getCourse(n),"item_bank_exercise"==e&&this.getExercise(n);var r=this;$.ajax({url:"/api/answer_record/"+$("[name='answer_record_id']").val(),type:"GET",async:!1,headers:{Accept:"application/vnd.edusoho.v2+json"},beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content")),t.setRequestHeader("X-Requested-With","XMLHttpRequest")}}).done((function(t){r.metaActivity=t.metaActivity,r.assessment=t.assessment,r.answerReport=t.answer_report,r.answerRecord=t.answer_record,r.answerScene=t.answer_scene,r.assessmentResponses=t.assessment_response})),$.ajax({url:"/api/assessments/"+r.assessment.id+"/question_favorites",type:"GET",async:!1,headers:{Accept:"application/vnd.edusoho.v2+json"},beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content")),t.setRequestHeader("X-Requested-With","XMLHttpRequest")}}).done((function(t){r.questionFavorites=t}))},methods:{getExercise:function(t){var e=this;return _()(x().mark((function n(){var r;return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.o.getExercise(t);case 2:r=n.sent,e.exercise=r;case 4:case"end":return n.stop()}}),n)})))()},getCourse:function(t){var e=this;return _()(x().mark((function n(){return x().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.g.getSingleCourse(t).then((function(t){e.courseSetStatus=t.canLearn}));case 2:case"end":return n.stop()}}),n)})))()},doAgainEvent:function(t){"closed"===($("[name=assessment_status]").length>0?$("[name=assessment_status]").val():"")?this.$error({title:"试卷已关闭",okText:"确定",centered:!0,onOk:function(){window.location.href=$("[name=return_url]").val()}}):location.href=$("[name=restart_url]").val()},cancelFavoriteEvent:function(t){$.ajax({url:"/api/me/question_favorite/1",headers:{Accept:"application/vnd.edusoho.v2+json"},contentType:"application/json;charset=utf-8",type:"DELETE",beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))},data:g()(t)}).done((function(t){}))},gotoReturnUrl:function(){parent.location.href=$("[name=submit_return_url]").val()},returnUrlGoto:function(){parent.location.href=$("[name=submit_return_url]").val()},favoriteEvent:function(t){$.ajax({url:"/api/me/question_favorite",headers:{Accept:"application/vnd.edusoho.v2+json"},contentType:"application/json;charset=utf-8",type:"POST",beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))},data:g()(t)}).done((function(t){}))},deleteAttachment:function(t,e){e&&(this.fileId=t)},previewAttachment:function(t){this.fileId=t},downloadAttachment:function(t){this.fileId=t},previewAttachmentCallback:function(){var t=this,e=this;return new w.a((function(n){$.ajax({url:$("[name=preview-attachment-url]").val(),type:"post",data:{id:t.fileId},beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))}}).done((function(t){console.log(app),console.log(t),t.data.sdkBaseUri=app.cloudSdkBaseUri,t.data.disableDataUpload=app.cloudDisableLogReport,t.data.disableSentry=app.cloudDisableLogReport,n(t),e.fileId=0}))}))},downloadAttachmentCallback:function(){var t=this,e=this;return new w.a((function(n){$.ajax({url:$("[name=download-attachment-url]").val(),type:"post",data:{id:t.fileId},beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))}}).done((function(t){n(t),e.fileId=0}))}))},deleteAttachmentCallback:function(){var t=this,e=this;return new w.a((function(n){$.ajax({url:$("[name=delete-attachment-url]").val(),type:"post",data:{id:t.fileId},beforeSend:function(t){t.setRequestHeader("X-CSRF-Token",$("meta[name=csrf-token]").attr("content"))}}).done((function(t){n(t),e.fileId=0}))}))}}},C=n(22),R=Object(C.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ibs-vue",attrs:{id:"app"}},[n("item-report",{attrs:{answerShow:t.answerShow,metaActivity:t.metaActivity,answerReport:t.answerReport,assessment:t.assessment,answerRecord:t.answerRecord,isDownload:t.isDownload,answerScene:t.answerScene,questionFavorites:t.questionFavorites,showCKEditorData:t.showCKEditorData,showAttachment:t.showAttachment,showDoAgainBtn:t.showDoAgainBtn,cdnHost:t.cdnHost,collect:t.collect,assessmentResponses:t.assessmentResponses,exercise:t.exercise,courseSetStatus:t.courseSetStatus,previewAttachmentCallback:t.previewAttachmentCallback,downloadAttachmentCallback:t.downloadAttachmentCallback},on:{previewAttachment:t.previewAttachment,downloadAttachment:t.downloadAttachment,doAgainEvent:t.doAgainEvent,cancelFavoriteEvent:t.cancelFavoriteEvent,favoriteEvent:t.favoriteEvent,submitReturn:t.returnUrlGoto}},[t.showReturnBtn?n("template",{slot:"returnBtn"},[n("div",{staticClass:"ibs-text-center ibs-mt16"},[n("a-button",{attrs:{type:"primary",shape:"round"},on:{click:t.gotoReturnUrl}},[t._v(t._s("返回错题本"))])],1)]):t._e()],2)],1)}),[],!1,null,null,null).exports,j=n(312),L=n(34);jQuery.support.cors=!0,Object(L.g)()&&$("body, html").css({height:"100%",overflow:"auto"}),Vue.config.productionTip=!1,Vue.component(j.a.name,j.a),Vue.use(r.a),new Vue({render:function(t){return t(R)}}).$mount("#app")},312:function(t,e,n){"use strict";var r=n(16),o=n.n(r),a=n(163),i=n(162),s=n(55),c=n(43),u={name:"item-report",mixins:[s.a,c.a],data:function(){return{time:null,timeMeter:null,flag:!1,visible:!1,closable:!1,redoInterval:Number(this.answerScene.redo_interval),doTimes:Number(this.answerScene.do_times),finishedTime:1e3*Number(this.answerReport.review_time)}},components:{itemEngine:i.a},props:{exercise:{type:Object,default:function(){return{}}},metaActivity:{type:Object,default:function(){return{}}},courseSetStatus:{type:String,default:"1"},answerReport:{type:Object,default:function(){return{}}},assessment:{type:Object,default:function(){return{}}},answerRecord:{type:Object,default:function(){return{}}},answerScene:{type:Object,default:function(){return{}}},answerShow:{type:String,default:function(){return"show"}},assessmentStatus:{type:String,default:function(){return""}},questionFavorites:{type:Array,default:function(){return[]}},cdnHost:{type:String,default:"service-cdn.qiqiuyun.net"},previewAttachmentCallback:{type:Function,default:function(){return new o.a((function(t){t()}))}},downloadAttachmentCallback:{type:Function,default:function(){return new o.a((function(t){t()}))}},Collect:{type:Boolean,default:!0},showCKEditorData:{type:Object,default:function(){return{}}},showDoAgainBtn:{type:Number,default:1},isErrorCorrection:{type:String,default:"0"},isDownload:{type:Boolean,default:!1},assessmentResponses:{type:Object,default:function(){return{}}},isShowAiAnalysis:{type:Boolean,default:!0}},computed:{timeCount:function(){return this.finishedTime+60*this.redoInterval*1e3-Date.parse(new Date)}},created:function(){this.$on("doAgain",this.doAgain)},mounted:function(){"finished"===this.answerRecord.status&&this.redoInterval&&!this.doTimes&&this.timeCount>0?this.timer():this.flag=!0},methods:{doAgain:function(){this.flag?this.$emit("doAgainEvent"):this.visible=!0},timer:function(){var t=this,e=0,n=this.timeCount;this.timeMeter=setInterval((function(){var r=Object(a.a)(n,e++),o=r.hours,i=r.minutes,s=r.seconds;t.time="".concat(o,":").concat(i,":").concat(s),console.log(t.time),(0==Number(o)&&0==Number(i)&&0==Number(s)||Number(s)<0)&&(t.flag=!0,t.clearTime(),t.visible=!1)}),1e3)},clearTime:function(){clearInterval(this.timeMeter),this.timeMeter=null},handleOk:function(){this.visible=!1},getContainer:function(){return document.getElementById("item-bank-sdk-message")},collectUpdateEvent:function(t){this.$emit("favoriteEvent",t),this.dispatch("assessment-result","favoriteEvent",t)},cancelCollectEvent:function(t){this.$emit("cancelFavoriteEvent",t),this.dispatch("assessment-result","cancelFavoriteEvent",t)},previewAttachment:function(t){this.$emit("previewAttachment",t)},downloadAttachment:function(t){this.$emit("downloadAttachment",t)},errorCorrection:function(t){this.$emit("error-correction",t)},getAiAnalysis:function(t,e){this.$emit("getAiAnalysis",t,e)},stopAiAnalysis:function(t){this.$emit("stopAiAnalysis",t)}}},l=n(22),f=Object(l.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("item-engine",{attrs:{mode:"report",metaActivity:t.metaActivity,answerShow:t.answerShow,answerReport:t.answerReport,assessment:t.assessment,answerRecord:t.answerRecord,answerScene:t.answerScene,cdnHost:t.cdnHost,isDownload:t.isDownload,assessmentStatus:t.assessmentStatus,questionFavorites:t.questionFavorites,Collect:t.Collect,exercise:t.exercise,showCKEditorData:t.showCKEditorData,isErrorCorrection:t.isErrorCorrection,assessmentResponses:t.assessmentResponses,previewAttachmentCallback:t.previewAttachmentCallback,downloadAttachmentCallback:t.downloadAttachmentCallback,showDoAgainBtn:t.showDoAgainBtn,courseSetStatus:t.courseSetStatus,isShowAiAnalysis:t.isShowAiAnalysis},on:{collectUpdateEvent:t.collectUpdateEvent,cancelCollectEvent:t.cancelCollectEvent,previewAttachment:t.previewAttachment,downloadAttachment:t.downloadAttachment,"error-correction":t.errorCorrection,getAiAnalysis:t.getAiAnalysis,stopAiAnalysis:t.stopAiAnalysis},scopedSlots:t._u([{key:"returnBtn",fn:function(){return[t._t("returnBtn")]},proxy:!0}],null,!0)}),t._v(" "),"finished"!==t.assessmentStatus?n("a-modal",{attrs:{title:t.t("itemReport.DoAgain_tip"),visible:t.visible,closable:t.closable,getContainer:t.getContainer}},[n("p",[n("span",{staticClass:"ibs-warning-color"},[n("i",{staticClass:"ib-icon ib-icon-info ibs-mr8"}),t._v(t._s(t.t("itemReport.DoAagin_time")))]),n("span",{staticClass:"ibs-text-medium ibs-ml8"},[t._v(t._s(t.time))])]),t._v(" "),n("template",{slot:"footer"},[n("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("\n        "+t._s(t.t("itemReport.DoAagin_know"))+"\n      ")])],1)],2):t._e()],1)}),[],!1,null,null,null);e.a=f.exports}});