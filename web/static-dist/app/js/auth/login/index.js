!function(e){function n(n){for(var t,i,s=n[0],c=n[1],l=n[2],u=0,h=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(t in c)Object.prototype.hasOwnProperty.call(c,t)&&(e[t]=c[t]);for(d&&d(n);h.length;)h.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,n=0;n<a.length;n++){for(var r=a[n],t=!0,s=1;s<r.length;s++){var c=r[s];0!==o[c]&&(t=!1)}t&&(a.splice(n--,1),e=i(i.s=r[0]))}return e}var t={},o={156:0},a=[];function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,n,r){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)i.d(r,t,function(n){return e[n]}.bind(null,t));return r},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="/static-dist/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=n,s=s.slice();for(var l=0;l<s.length;l++)n(s[l]);var d=c;a.push([1237,0]),r()}({1237:function(e,n,r){"use strict";r.r(n);var t=r(360),o=r(84);r(269);var a=$("#login-form"),i=$("#drag-btn").length?new o.a($("#drag-btn"),$(".js-jigsaw"),{limitType:"user_login"}):null,s=a.validate({rules:{_username:{required:!0},_password:{required:!0},dragCaptchaToken:{required:!0}},messages:{dragCaptchaToken:{required:Translator.trans("auth.register.drag_captcha_tips")},_username:{required:Translator.trans("auth.register.name_required_error_hint")},_password:{required:Translator.trans("auth.register.password_required_error_hint")}}});$("#login-form").keypress((function(e){13==e.which&&($(".js-btn-login").trigger("click"),e.preventDefault())})),$(".js-btn-login").click((function(e){var n=$('input[name="agree_policy"]').prop("checked");$(e.currentTarget).button("loadding");var r=a.find("#login_username").val(),t=a.find("#login_password").val(),o=window.XXTEA.encryptToBase64(r,"EduSoho"),c=window.XXTEA.encryptToBase64(t,"EduSoho"),l=a.serializeArray(),d={_username:o,_password:c};if(l.forEach((function(e){d.hasOwnProperty(e.name)&&(e.value=d[e.name])})),s.form())if(n||null==n)$.post(a.attr("action"),$.param(l),(function(e){window.location.replace("/")}),"json").error((function(e,n,r){var t=jQuery.parseJSON(e.responseText);a.find(".alert-danger").html(Translator.trans(t.message)).show(),i.initDragCaptcha()}));else{var u=$("#modal");u.load("/login/agreement"),u.modal("show"),u.on("click",".js-agree-register",(function(){$('input[name="agree_policy"]').prop("checked",!0),u.modal("hide"),$.post(a.attr("action"),$.param(l),(function(e){window.location.replace("/")}),"json").error((function(e,n,r){var t=jQuery.parseJSON(e.responseText);a.find(".alert-danger").html(Translator.trans(t.message)).show(),i.initDragCaptcha()}))})),u.on("click",".js-close-modal",(function(){u.modal("hide")}))}})),$(".receive-modal").click(),$(".js-sts-login-link").length&&new t.a({element:$(".js-login-main")}),$(".open-eye").on("click",(function(){$("#login_password").attr("type","password"),$(".open-eye").hide(),$(".close-eye").show()})),$(".close-eye").on("click",(function(){$("#login_password").attr("type","text"),$(".close-eye").hide(),$(".open-eye").show()}))},269:function(e,n){!function(e){"use strict";var n,r;void 0===e.btoa&&(e.btoa=(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),function(e){var r,t,o,a,i,s,c;for(t=o=0,a=e.length,s=(a-=i=a%3)/3<<2,i>0&&(s+=4),r=new Array(s);t<a;)c=e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<8|e.charCodeAt(t++),r[o++]=n[c>>18]+n[c>>12&63]+n[c>>6&63]+n[63&c];return 1==i?(c=e.charCodeAt(t++),r[o++]=n[c>>2]+n[(3&c)<<4]+"=="):2==i&&(c=e.charCodeAt(t++)<<8|e.charCodeAt(t++),r[o++]=n[c>>10]+n[c>>4&63]+n[(15&c)<<2]+"="),r.join("")})),void 0===e.atob&&(e.atob=(r=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],function(e){var n,t,o,a,i,s,c,l,d,u;if((c=e.length)%4!=0)return"";if(/[^ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\+\/\=]/.test(e))return"";for(d=c,(l="="==e.charAt(c-2)?1:"="==e.charAt(c-1)?2:0)>0&&(d-=4),d=3*(d>>2)+l,u=new Array(d),i=s=0;i<c&&-1!=(n=r[e.charCodeAt(i++)])&&-1!=(t=r[e.charCodeAt(i++)])&&(u[s++]=String.fromCharCode(n<<2|(48&t)>>4),-1!=(o=r[e.charCodeAt(i++)]))&&(u[s++]=String.fromCharCode((15&t)<<4|(60&o)>>2),-1!=(a=r[e.charCodeAt(i++)]));)u[s++]=String.fromCharCode((3&o)<<6|a);return u.join("")}));var t=2654435769;function o(e,n){var r=e.length,t=r<<2;if(n){var o=e[r-1];if(o<(t-=4)-3||o>t)return null;t=o}for(var a=0;a<r;a++)e[a]=String.fromCharCode(255&e[a],e[a]>>>8&255,e[a]>>>16&255,e[a]>>>24&255);var i=e.join("");return n?i.substring(0,t):i}function a(e,n){var r,t=e.length,o=t>>2;0!=(3&t)&&++o,n?(r=new Array(o+1))[o]=t:r=new Array(o);for(var a=0;a<t;++a)r[a>>2]|=e.charCodeAt(a)<<((3&a)<<3);return r}function i(e){return 4294967295&e}function s(e,n,r,t,o,a){return(r>>>5^n<<2)+(n>>>3^r<<4)^(e^n)+(a[3&t^o]^r)}function c(e){return e.length<4&&(e.length=4),e}function l(e){if(/^[\x00-\x7f]*$/.test(e))return e;for(var n=[],r=e.length,t=0,o=0;t<r;++t,++o){var a=e.charCodeAt(t);if(a<128)n[o]=e.charAt(t);else if(a<2048)n[o]=String.fromCharCode(192|a>>6,128|63&a);else{if(!(a<55296||a>57343)){if(t+1<r){var i=e.charCodeAt(t+1);if(a<56320&&56320<=i&&i<=57343){var s=65536+((1023&a)<<10|1023&i);n[o]=String.fromCharCode(240|s>>18&63,128|s>>12&63,128|s>>6&63,128|63&s),++t;continue}}throw new Error("Malformed string")}n[o]=String.fromCharCode(224|a>>12,128|a>>6&63,128|63&a)}}return n.join("")}function d(e,n){return(null==n||n<0)&&(n=e.length),0===n?"":/^[\x00-\x7f]*$/.test(e)||!/^[\x00-\xff]*$/.test(e)?n===e.length?e:e.substr(0,n):n<65535?function(e,n){for(var r=new Array(n),t=0,o=0,a=e.length;t<n&&o<a;t++){var i=e.charCodeAt(o++);switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r[t]=i;break;case 12:case 13:if(!(o<a))throw new Error("Unfinished UTF-8 octet sequence");r[t]=(31&i)<<6|63&e.charCodeAt(o++);break;case 14:if(!(o+1<a))throw new Error("Unfinished UTF-8 octet sequence");r[t]=(15&i)<<12|(63&e.charCodeAt(o++))<<6|63&e.charCodeAt(o++);break;case 15:if(!(o+2<a))throw new Error("Unfinished UTF-8 octet sequence");var s=((7&i)<<18|(63&e.charCodeAt(o++))<<12|(63&e.charCodeAt(o++))<<6|63&e.charCodeAt(o++))-65536;if(!(0<=s&&s<=1048575))throw new Error("Character outside valid Unicode range: 0x"+s.toString(16));r[t++]=s>>10&1023|55296,r[t]=1023&s|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+i.toString(16))}}return t<n&&(r.length=t),String.fromCharCode.apply(String,r)}(e,n):function(e,n){for(var r=[],t=new Array(32768),o=0,a=0,i=e.length;o<n&&a<i;o++){var s=e.charCodeAt(a++);switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t[o]=s;break;case 12:case 13:if(!(a<i))throw new Error("Unfinished UTF-8 octet sequence");t[o]=(31&s)<<6|63&e.charCodeAt(a++);break;case 14:if(!(a+1<i))throw new Error("Unfinished UTF-8 octet sequence");t[o]=(15&s)<<12|(63&e.charCodeAt(a++))<<6|63&e.charCodeAt(a++);break;case 15:if(!(a+2<i))throw new Error("Unfinished UTF-8 octet sequence");var c=((7&s)<<18|(63&e.charCodeAt(a++))<<12|(63&e.charCodeAt(a++))<<6|63&e.charCodeAt(a++))-65536;if(!(0<=c&&c<=1048575))throw new Error("Character outside valid Unicode range: 0x"+c.toString(16));t[o++]=c>>10&1023|55296,t[o]=1023&c|56320;break;default:throw new Error("Bad UTF-8 encoding 0x"+s.toString(16))}if(o>=32766){var l=o+1;t.length=l,r[r.length]=String.fromCharCode.apply(String,t),n-=l,o=-1}}return o>0&&(t.length=o,r[r.length]=String.fromCharCode.apply(String,t)),r.join("")}(e,n)}function u(e,n){return null==e||0===e.length?e:(e=l(e),n=l(n),o(function(e,n){var r,o,a,c,l,d,u=e.length,h=u-1;for(o=e[h],a=0,d=0|Math.floor(6+52/u);d>0;--d){for(c=(a=i(a+t))>>>2&3,l=0;l<h;++l)r=e[l+1],o=e[l]=i(e[l]+s(a,r,o,l,c,n));r=e[0],o=e[h]=i(e[h]+s(a,r,o,h,c,n))}return e}(a(e,!0),c(a(n,!1))),!1))}function h(e,n){return null==e||0===e.length?e:(n=l(n),d(o(function(e,n){var r,o,a,c,l,d=e.length,u=d-1;for(r=e[0],a=i(Math.floor(6+52/d)*t);0!==a;a=i(a-t)){for(c=a>>>2&3,l=u;l>0;--l)o=e[l-1],r=e[l]=i(e[l]-s(a,r,o,l,c,n));o=e[u],r=e[0]=i(e[0]-s(a,r,o,0,c,n))}return e}(a(e,!1),c(a(n,!1))),!0)))}e.XXTEA={utf8Encode:l,utf8Decode:d,encrypt:u,encryptToBase64:function(n,r){return e.btoa(u(n,r))},decrypt:h,decryptFromBase64:function(n,r){return null==n||0===n.length?n:h(e.atob(n),r)}}}(window)},360:function(e,n,r){"use strict";r.d(n,"a",(function(){return s}));var t=r(4),o=r.n(t),a=r(5),i=r.n(a),s=function(){function e(n){o()(this,e),this.options=n,this.$element=this.options.element,this.$loginDom=$(".js-sts-login"),this.init()}return i()(e,[{key:"init",value:function(){this.bindEvent(),this.closeModal()}},{key:"bindEvent",value:function(){var e=this;this.$loginDom.on("click",".js-login-back",(function(){return e.back()})),this.$loginDom.on("click",".js-invalid-btn",(function(){return e.refresh()})),this.$loginDom.on("click",".js-approve-again-btn",(function(){return e.approveAgain()})),this.$element.on("click",".js-sts-login-link",(function(){return e.showQrcode()}))}},{key:"back",value:function(){$(".js-approve-ing, .js-feedback, .js-sts-login").addClass("hidden"),this.options.target?this.$element.find(this.options.target).removeClass("hidden"):this.$element.removeClass("hidden")}},{key:"showQrcode",value:function(){var e=this;$.ajax({type:"post",url:this.$loginDom.data("url"),dataType:"json",success:function(n){console.log(n),e.$loginDom.find(".js-sts-login-qrcode img").attr("src",n.qrcode),e.onlyShow(),e.token=n.token,e.pollStatus()}})}},{key:"approveAgain",value:function(){$(".js-feedback").addClass("hidden"),$(".js-login-section, .js-sts-tip").removeClass("hidden"),this.refresh()}},{key:"refresh",value:function(){$(".js-approve-ing").addClass("hidden"),this.showQrcode()}},{key:"pollStatus",value:function(){var e=this,n=this.token,r=this.$loginDom.data("goto"),t=$(".js-fail-feedback"),o=$(".js-success-feedback"),a=$(".js-fail-tip"),i=$(".js-approve-again-btn");this.$loginDom.hasClass("hidden")||this.flag||$.get("/login/face_token/".concat(n),{goto:r},(function(n){switch(n.status){case"created":setTimeout((function(){e.pollStatus()}),2e3);break;case"processing":$(".js-invalid-btn").addClass("hidden"),$(".js-approve-ing, .js-approve-ing-tip").removeClass("hidden"),setTimeout((function(){e.pollStatus()}),2e3);break;case"expired":$(".js-approve-ing-tip").addClass("hidden"),$(".js-approve-ing, .js-invalid-btn").removeClass("hidden");break;case"successed":e.statusShow(),o.removeClass("hidden").siblings().addClass("hidden"),window.location.href=n.url;break;case"failed":e.feedbackShow(t,i,a);break;case"failures":e.feedbackShow(t,a,i)}}))}},{key:"closeModal",value:function(){var e=this;$("#login-modal").on("hide.bs.modal",(function(){e.flag=!0}))}},{key:"onlyShow",value:function(){$(".js-sts-login, .js-login-section, .js-sts-tip").removeClass("hidden"),this.options.target?this.$element.find(this.options.target).addClass("hidden"):this.$element.addClass("hidden")}},{key:"statusShow",value:function(){$(".js-login-section, .js-sts-tip").addClass("hidden"),$(".js-feedback").removeClass("hidden")}},{key:"feedbackShow",value:function(e,n,r){this.statusShow(),e.removeClass("hidden").siblings().addClass("hidden"),n.removeClass("hidden"),r.addClass("hidden")}}]),e}()}});