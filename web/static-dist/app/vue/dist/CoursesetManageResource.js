/*! For license information please see CoursesetManageResource.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[445],{1629:function(t,e,n){"use strict";n.r(e);var r=n(16),a=n.n(r),o=n(26),i=n.n(o),c=n(19),s=n.n(c),l=n(37),u=n.n(l),f=n(13),h=n.n(f),d=n(24),p=n.n(d),v=n(20),y=n.n(v),g=n(23),m=n.n(g),w=n(88);function b(){b=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=y.a||function(t,e,n){t[e]=n.value},c="function"==typeof p.a?p.a:{},l=c.iterator||"@@iterator",f=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function v(t,e,n){return y()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{v({},"")}catch(t){v=function(t,e,n){return t[e]=n}}function g(t,e,n,r){var a=e&&e.prototype instanceof k?e:k,i=h()(a.prototype),c=new M(r||[]);return o(i,"_invoke",{value:N(t,n,c)}),i}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=g;var w="suspendedStart",_="executing",x="completed",L={};function k(){}function E(){}function S(){}var R={};v(R,l,(function(){return this}));var T=u.a,C=T&&T(T(O([])));C&&C!==n&&r.call(C,l)&&(R=C);var I=S.prototype=k.prototype=h()(R);function P(t){["next","throw","return"].forEach((function(e){v(t,e,(function(t){return this._invoke(e,t)}))}))}function G(t,e){function n(a,o,i,c){var l=m(t[a],t,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==s()(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(f).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,a){n(t,r,e,a)}))}return a=a?a.then(o,o):o()}})}function N(e,n,r){var a=w;return function(o,i){if(a===_)throw Error("Generator is already running");if(a===x){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var c=r.delegate;if(c){var s=j(c,r);if(s){if(s===L)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===w)throw a=x,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=_;var l=m(e,n,r);if("normal"===l.type){if(a=r.done?x:"suspendedYield",l.arg===L)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(a=x,r.method="throw",r.arg=l.arg)}}}function j(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),L;var o=m(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,L;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,L):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,L)}function K(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(K,this),this.reset(!0)}function O(e){if(e||""===e){var n=e[l];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(s()(e)+" is not iterable")}return E.prototype=S,o(I,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:E,configurable:!0}),E.displayName=v(S,d,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return i.a?i()(t,S):(t.__proto__=S,v(t,d,"GeneratorFunction")),t.prototype=h()(I),t},e.awrap=function(t){return{__await:t}},P(G.prototype),v(G.prototype,f,(function(){return this})),e.AsyncIterator=G,e.async=function(t,n,r,o,i){void 0===i&&(i=a.a);var c=new G(g(t,n,r,o),i);return e.isGeneratorFunction(n)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},P(I),v(I,d,"Generator"),v(I,l,(function(){return this})),v(I,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(F),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return c.type="throw",c.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,L):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),L},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),F(n),L}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;F(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),L}},e}var _=[{title:Translator.trans("live_name"),dataIndex:"title"},{title:Translator.trans("live_statistics.presenter"),dataIndex:"anchor"},{title:Translator.trans("live_playback_duration"),dataIndex:"liveTime"},{title:Translator.trans("live_statistics.live_time"),dataIndex:"liveStartTime"},{title:Translator.trans("live_statistics.operation"),scopedSlots:{customRender:"actions"}}],x={name:"CoursesetManageLivePlayback",data:function(){return{data:[],columns:_,pagination:{hideOnSinglePage:!0,current:1,pageSize:10,total:0},selectedRowKeys:[],loading:!1,visible:!1,btnLoading:!1,currentId:void 0,courseId:$(".js-course-id").val()}},computed:{hasSelected:function(){return this.selectedRowKeys.length>0}},mounted:function(){this.fetchLiveReplay()},methods:{fetchLiveReplay:function(){var t=this;return m()(b().mark((function e(){var n,r,a,o,i,c,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,n=t.pagination,r=n.current,a=n.pageSize,o={params:{offset:(r-1)*a,limit:a,courseId:t.courseId}},e.next=5,w.q.get(o);case 5:i=e.sent,c=i.data,s=i.paging,t.loading=!1,t.pagination.total=s.total,t.data=c;case 11:case"end":return e.stop()}}),e)})))()},handleTableChange:function(t){this.pagination.current=t.current,this.fetchLiveReplay()},onSelectChange:function(t){this.selectedRowKeys=t},showModal:function(t){this.currentId=[t],this.visible=!0},hiddenModal:function(){this.visible=!1},handleClickRemove:function(){this.currentId=this.selectedRowKeys,this.visible=!0},handleClickRemoveLivePlayback:function(){var t=this;return m()(b().mark((function e(){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.btnLoading=!0,n={data:{ids:t.currentId}},e.next=4,w.q.delete(n);case 4:r=e.sent,r.success&&(t.$message.success(Translator.trans("message.removal_succeeded")),t.btnLoading=!1,t.visible=!1,t.pagination.current=1,t.fetchLiveReplay());case 7:case"end":return e.stop()}}),e)})))()},handleClickViewLivePlayback:function(t){window.open(t)}}},L=n(22),k=Object(L.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"mb16",staticStyle:{padding:"12px 20px",background:"#f4f4f4"}},[n("a-button",{attrs:{type:"danger",disabled:!t.hasSelected},on:{click:t.handleClickRemove}},[t._v("\n      "+t._s(t._f("trans")("site.btn.remove_playback"))+"\n    ")])],1),t._v(" "),n("a-table",{attrs:{"row-selection":{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},columns:t.columns,"row-key":function(t){return t.id},"data-source":t.data,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"actions",fn:function(e){return[n("a-button-group",[n("a-button",{staticStyle:{padding:"0 8px"},attrs:{type:"primary"},on:{click:function(n){return t.handleClickViewLivePlayback(e.url)}}},[t._v("\n          "+t._s(t._f("trans")("site.btn.view_playback"))+"\n        ")]),t._v(" "),n("a-dropdown",{attrs:{placement:"bottomRight"}},[n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",{on:{click:function(n){return t.showModal(e.id)}}},[t._v("\n              "+t._s(t._f("trans")("site.btn.remove_playback"))+"\n            ")])],1),t._v(" "),n("a-button",{staticStyle:{padding:"0 8px"},attrs:{type:"primary"}},[n("a-icon",{attrs:{type:"down"}})],1)],1)],1)]}}])}),t._v(" "),n("a-modal",{attrs:{title:t._f("trans")("site.btn.remove_playback"),visible:t.visible},on:{cancel:t.hiddenModal}},[t._v("\n    "+t._s(t._f("trans")("modal.content.remove_playback_resources"))+"\n    "),n("template",{slot:"footer"},[n("div",{staticClass:"clearfix"},[n("span",{staticClass:"pull-left",staticStyle:{color:"#fe4040","margin-top":"7px"}},[t._v("\n          "+t._s(t._f("trans")("live.playback.tip.cannot_be_used_normally"))+"\n        ")]),t._v(" "),n("a-button",{attrs:{type:"danger",loading:t.btnLoading},on:{click:t.handleClickRemoveLivePlayback}},[t._v("\n          "+t._s(t._f("trans")("site.btn.confirm"))+"\n        ")])],1)])],2)],1)}),[],!1,null,null,null);e.default=k.exports},381:function(t,e,n){t.exports=n(668)},4:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},5:function(t,e,n){var r=n(20);function a(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),r(t,a.key,a)}}t.exports=function(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}},668:function(t,e,n){n(669),t.exports=n(67).Reflect.deleteProperty},669:function(t,e,n){var r=n(82),a=n(280).f,o=n(140);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=a(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})}}]);