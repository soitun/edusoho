/*! For license information please see CreateCourse.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[446],{1639:function(e,t,r){"use strict";r.r(t);var a=r(26),i=r.n(a),n=r(19),o=r.n(n),s=r(37),l=r.n(s),c=r(13),u=r.n(c),d=r(24),p=r.n(d),f=r(20),h=r.n(f),v=r(25),m=r.n(v),g=r(31),y=r.n(g),b=r(16),x=r.n(b),w=r(23),_=r.n(w),C=r(1653),k=r(74),S=r.n(k),T=r(1733),E=r.n(T),L=(r(1734),r(88));function N(){N=function(){return t};var e,t={},r=Object.prototype,a=r.hasOwnProperty,n=h.a||function(e,t,r){e[t]=r.value},s="function"==typeof p.a?p.a:{},c=s.iterator||"@@iterator",d=s.asyncIterator||"@@asyncIterator",f=s.toStringTag||"@@toStringTag";function v(e,t,r){return h()(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{v({},"")}catch(e){v=function(e,t,r){return e[t]=r}}function m(e,t,r,a){var i=t&&t.prototype instanceof C?t:C,o=u()(i.prototype),s=new j(a||[]);return n(o,"_invoke",{value:M(e,r,s)}),o}function g(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=m;var y="suspendedStart",b="executing",w="completed",_={};function C(){}function k(){}function S(){}var T={};v(T,c,(function(){return this}));var E=l.a,L=E&&E(E(A([])));L&&L!==r&&a.call(L,c)&&(T=L);var V=S.prototype=C.prototype=u()(T);function U(e){["next","throw","return"].forEach((function(t){v(e,t,(function(e){return this._invoke(t,e)}))}))}function q(e,t){function r(i,n,s,l){var c=g(e[i],e,n);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==o()(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,l)}),(function(e){r("throw",e,s,l)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,l)}))}l(c.arg)}var i;n(this,"_invoke",{value:function(e,a){function n(){return new t((function(t,i){r(e,a,t,i)}))}return i=i?i.then(n,n):n()}})}function M(t,r,a){var i=y;return function(n,o){if(i===b)throw Error("Generator is already running");if(i===w){if("throw"===n)throw o;return{value:e,done:!0}}for(a.method=n,a.arg=o;;){var s=a.delegate;if(s){var l=F(s,a);if(l){if(l===_)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===y)throw i=w,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=b;var c=g(t,r,a);if("normal"===c.type){if(i=a.done?w:"suspendedYield",c.arg===_)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(i=w,a.method="throw",a.arg=c.arg)}}}function F(t,r){var a=r.method,i=t.iterator[a];if(i===e)return r.delegate=null,"throw"===a&&t.iterator.return&&(r.method="return",r.arg=e,F(t,r),"throw"===r.method)||"return"!==a&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+a+"' method")),_;var n=g(i,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,_;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,_):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function $(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function A(t){if(t||""===t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function r(){for(;++i<t.length;)if(a.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return n.next=n}}throw new TypeError(o()(t)+" is not iterable")}return k.prototype=S,n(V,"constructor",{value:S,configurable:!0}),n(S,"constructor",{value:k,configurable:!0}),k.displayName=v(S,f,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return i.a?i()(e,S):(e.__proto__=S,v(e,f,"GeneratorFunction")),e.prototype=u()(V),e},t.awrap=function(e){return{__await:e}},U(q.prototype),v(q.prototype,d,(function(){return this})),t.AsyncIterator=q,t.async=function(e,r,a,i,n){void 0===n&&(n=x.a);var o=new q(m(e,r,a,i),n);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},U(V),v(V,f,"Generator"),v(V,c,(function(){return this})),v(V,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var a in t)r.push(a);return r.reverse(),function e(){for(;r.length;){var a=r.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=A,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach($),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(a,i){return s.type="throw",s.arg=t,r.next=a,i&&(r.method="next",r.arg=e),!!i}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),$(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if("throw"===a.type){var i=a.arg;$(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,a){return this.delegate={iterator:A(t),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=e),_}},t}var V={name:"CreateCourse",props:{},components:{VueCropper:E.a,AsideLayout:C.a},data:function(){return{cropModal:0,form:this.$form.createForm(this),formInfo:{buyable:!0},teacher:{list:[],title:"",flag:!0,initialValue:void 0,paging:{pageSize:10,current:0}},assistant:{list:[],title:"",flag:!0,initialValue:[],paging:{pageSize:10,current:0}},courseCoverUrl:"",imgUrl:"",cropModalVisible:!1,loading:!1,editor:{},ajaxLoading:!1,uploadToken:{},courseCoverName:"",uploading:!1,imgs:null,imageUploadUrl:"/editor/upload?token=",flashUploadUrl:"/editor/upload?token=",liveCapacity:0}},created:function(){this.fetchAssistants(),this.fetchTeacher(),this.getLiveCapacity()},mounted:function(){var e=this;return _()(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getEditorUploadToken();case 2:e.editor=CKEDITOR.replace("summary",{allowedContent:!0,toolbar:"Detail",fileSingleSizeLimit:app.fileSingleSizeLimit,filebrowserImageUploadUrl:e.imageUploadUrl,filebrowserFlashUploadUrl:e.flashUploadUrl});case 3:case"end":return t.stop()}}),t)})))()},methods:{getUploadToken:function(){var e=this;return _()(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.J.get("default");case 2:return e.uploadToken=t.sent,t.abrupt("return",x.a.resolve(1));case 4:case"end":return t.stop()}}),t)})))()},getEditorUploadToken:function(){var e=this;return _()(N().mark((function t(){var r,a;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.J.get("course");case 2:return r=t.sent,a=r.token,e.imageUploadUrl+=a,e.flashUploadUrl+=a,t.abrupt("return",x.a.resolve(1));case 7:case"end":return t.stop()}}),t)})))()},getLiveCapacity:function(){var e=this;return _()(N().mark((function t(){var r,a;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.p.search();case 2:r=t.sent,a=r.capacity,e.liveCapacity=Number(a);case 5:case"end":return t.stop()}}),t)})))()},saveCourseSet:function(){var e=this;this.form.validateFields(function(){var t=_()(N().mark((function t(r,a){var i,n,o,s,l,c,u,d;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=2;break}return t.abrupt("return");case 2:return e.ajaxLoading=!0,a=e.formatValues(a),t.prev=4,t.next=7,L.j.add(a);case 7:i=t.sent,n=i.error,o=i.defaultCourseId,s=i.title,l=i.id,c=i.title,u=i.course,n||(e.$message.success("创建成功"),d=u.maxStudentNum,e.goToMultiClassCreatePage({id:o,title:c,courseSetId:l,courseSetTitle:s,maxStudentNum:d}));case 15:return t.prev=15,e.ajaxLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[4,,15,18]])})));return function(e,r){return t.apply(this,arguments)}}())},disabledTeacher:function(e){var t=e||this.form.getFieldValue("assistants")||this.assistant.initialValue;S.a.forEach(this.teacher.list,(function(e){S.a.includes(t,e.id)||(e.disabled=!1),S.a.forEach(t,(function(t){e.id==t&&(e.disabled=!0)}))}))},disabledAssistant:function(e){var t=e||this.form.getFieldValue("teachers")||this.teacher.initialValue;S.a.forEach(this.assistant.list,(function(e){e.id==t?e.disabled=!0:e.disabled=!1}))},formatValues:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e.summary=this.editor.getData(),e.teachers=[e.teachers],e=S.a.assignIn(e,{buyable:Number(this.formInfo.buyable)}),this.imgs&&(e.images=this.imgs),e)["buyExpiryTime","expiryStartDate","expiryEndDate","deadline"].includes(t)&&(e[t]=new Date(e[t]).getTime(),e[t]=S.a.floor(e[t]/1e3));return e},fetchTeacher:function(){var e=this,t=this.teacher,r=t.title,a=t.paging,i=a.pageSize,n={limit:i,offset:i*a.current};r&&(n.nickname=r),L.G.search(n).then((function(t){e.teacher.paging.current++,e.teacher.list=S.a.concat(e.teacher.list,t.data),S.a.size(e.teacher.list)>=t.paging.total&&(e.teacher.flag=!1),e.disabledTeacher()}))},handleSearchTeacher:S.a.debounce((function(e){this.teacher={list:[],title:e,flag:!0,paging:{pageSize:10,current:0}},this.fetchTeacher()}),300),teacherScroll:S.a.debounce((function(e){var t=e.target;t.scrollHeight-t.offsetHeight-20<t.scrollTop&&this.teacher.flag&&this.fetchTeacher()}),300),fetchAssistants:function(){var e=this,t=this.assistant,r=t.title,a=t.paging,i=a.pageSize,n={limit:i,offset:i*a.current};r&&(n.nickname=r),L.b.search(n).then((function(t){e.assistant.paging.current++,e.assistant.list=S.a.concat(e.assistant.list,t.data),S.a.size(e.assistant.list)>=t.paging.total&&(e.assistant.flag=!1),e.disabledAssistant()}))},handleSearchAssistant:S.a.debounce((function(e){this.assistant={list:[],title:e,flag:!0,paging:{pageSize:10,current:0}},this.fetchAssistants()}),300),assistantScroll:S.a.debounce((function(e){var t=e.target;t.scrollHeight-t.offsetHeight-20<t.scrollTop&&this.assistant.flag&&this.fetchAssistants()}),300),handleChange:function(e,t){console.log(e),"teacher"!==t?"assistant"===t&&this.disabledTeacher(e):this.disabledAssistant(e)},switchBuyAble:function(e){this.$set(this.formInfo,"buyable",e)},uploadCourseCover:function(e){var t=this;this.cropModal+=1;var r=new FileReader;r.onload=function(e){t.imgUrl=e.target.result,t.cropModalVisible=!0},this.courseCoverName=e.file.originFileObj.name,r.readAsDataURL(e.file.originFileObj)},reSelectCourseCover:function(){var e=this.$refs.upload.$el.getElementsByTagName("input");this.cropModalVisible=!1,e.length>0&&e[0].click()},saveCourseCover:function(){var e=this;return _()(N().mark((function t(){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,e.uploadToken.expiry&&!(new Date>=new Date(e.uploadToken.expiry))){t.next=4;break}return t.next=4,e.getUploadToken();case 4:e.$refs.cropper.getCroppedCanvas().toBlob(function(){var t=_()(N().mark((function t(r){var a,i,n,o,s,l,c,u,d,p,f,h,v;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$refs.cropper.getData(),i=a.x,n=a.y,o=a.width,s=a.height,l=e.$refs.cropper.getImageData(),c={x:S.a.ceil(S.a.max([0,i])),y:S.a.ceil(S.a.max([0,n])),width:S.a.ceil(o),height:S.a.ceil(s)},u=y()({x:c.x,y:c.y,x2:S.a.add(c.x,c.width),y2:S.a.add(c.y,c.height),w:c.width,h:c.height,"imgs[large][0]":480,"imgs[large][1]":270,"imgs[middle][0]":304,"imgs[middle][1]":171,"imgs[small][0]":96,"imgs[small][1]":54,post:!1,width:l.naturalWidth,height:l.naturalHeight,group:"course"},"post",!1),(d=new FormData).append("file",r,e.courseCoverName),d.append("token",e.uploadToken.token),e.uploading=!0,t.prev=8,t.next=11,L.l.uploadFile(d);case 11:for(v in p=t.sent,f=p.url,e.imgUrl=f,e.courseCoverUrl=f,h=new FormData,u)h.append(v,u[v]);return t.next=19,L.l.imgCrop(h);case 19:e.imgs=t.sent;case 20:return t.prev=20,e.uploading=!1,e.cropModalVisible=!1,e.loading=!1,t.finish(20);case 25:case"end":return t.stop()}}),t,null,[[8,,20,25]])})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t)})))()},requiredValidator:function(e,t,r){t||r(e.message),r()},goToMultiClassCreatePage:function(e){e?S.a.isObject(e)&&("group"!==this.$route.query.type?this.$router.replace({name:"MultiClassCreate",query:{course:m()(e)}}):this.$router.replace({name:"MultiClassCreateGroup",query:{course:m()(e)}})):this.$router.go(-1)},validatePrice:function(e,t,r){!1===/^[0-9]{0,8}(\.\d{0,2})?$/.test(t)&&r(e.message),r()},validateRange:function(e,t,r){t=Number(t),!S.a.isInteger(t)||t<0?r("请输入正整数"):t>this.liveCapacity&&r("网校可支持最多".concat(this.liveCapacity,"人同时参加直播。")),r()}}},U=V,q=(r(1959),r(22)),M=Object(q.a)(U,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("aside-layout",{staticClass:"create-course",attrs:{breadcrumbs:[{name:"新建课程"}]}},[r("a-form",{staticStyle:{"max-width":"860px"},attrs:{form:e.form,"label-col":{span:3},"wrapper-col":{span:21}}},[r("a-form-item",{attrs:{label:"课程类型"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{initialValue:"live"}],expression:"['type', {\n          initialValue: 'live'\n        }]"}],attrs:{options:[{label:"直播大班课",value:"live"}]}})],1),e._v(" "),r("a-form-item",{attrs:{label:"课程标题"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请填写课程名称"}]}],expression:"['title', { rules: [\n          { required: true, message: '请填写课程名称' },\n        ]} ]"}],attrs:{placeholder:"请输入课程标题"}})],1),e._v(" "),r("a-form-item",{attrs:{label:"课程副标题"}},[r("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["subtitle"],expression:"['subtitle']"}],attrs:{"auto-size":"",placeholder:"请输入课程副标题"}})],1),e._v(" "),r("a-form-item",{attrs:{label:"封面图片"}},[r("a-upload",{ref:"upload",attrs:{accept:"image/*","file-list":[],customRequest:function(){},"list-type":"picture-card"},on:{change:e.uploadCourseCover}},[e.courseCoverUrl?r("img",{staticStyle:{width:"100%"},attrs:{src:e.courseCoverUrl}}):r("div",[r("a-icon",{attrs:{type:e.loading?"loading":"plus"}}),e._v(" "),r("div",{staticClass:"ant-upload-text"},[e._v("\n          上传照片\n        ")])],1)])],1),e._v(" "),r("a-form-item",{attrs:{label:"课程简介"}},[r("div",{attrs:{id:"summary"}})]),e._v(" "),r("a-form-item",{attrs:{label:"授课教师"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["teachers",{rules:[{required:!0,message:"请选择授课老师"}]}],expression:"['teachers', { rules: [{ required: true, message: '请选择授课老师' }] }]"}],attrs:{"show-search":"","default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":null,placeholder:"请选择授课教师"},on:{popupScroll:e.teacherScroll,search:e.handleSearchTeacher,change:function(t){return e.handleChange(t,"teacher")}}},e._l(e.teacher.list,(function(t){return r("a-select-option",{key:t.id,attrs:{disabled:t.disabled}},[e._v("\n          "+e._s(t.nickname)+"\n        ")])})),1)],1),e._v(" "),r("a-form-item",{attrs:{label:"助教"}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["assistants",{rules:[{required:!0,message:"至少选择一位助教"}]}],expression:"['assistants', { rules: [{ required: true, message: '至少选择一位助教'}]}]"}],attrs:{mode:"multiple","default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":null,placeholder:"请选择一个或多个助教"},on:{popupScroll:e.assistantScroll,search:e.handleSearchAssistant,change:function(t){return e.handleChange(t,"assistant")}}},e._l(e.assistant.list,(function(t){return r("a-select-option",{key:t.id,attrs:{disabled:t.disabled}},[e._v("\n          "+e._s(t.nickname)+"\n        ")])})),1)],1),e._v(" "),r("a-form-item",{staticStyle:{position:"relative"},attrs:{label:"价格"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["originPrice",{initialValue:0,rules:[{validator:e.validatePrice,message:"请输入大于0的有效价格，最多两位小数，整数位不超过8位！"}]}],expression:"['originPrice', { initialValue: 0, rules: [\n          { validator: validatePrice, message: '请输入大于0的有效价格，最多两位小数，整数位不超过8位！' }\n        ] }]"}],attrs:{placeholder:"请输入产品价格"}},[r("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("元")])])],1),e._v(" "),r("a-form-item",{attrs:{label:"学习模式"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["learnMode",{initialValue:"freeMode"}],expression:"['learnMode', {\n          initialValue: 'freeMode'\n        }]"}],attrs:{options:[{label:"自由式",value:"freeMode"},{label:"解锁式",value:"lockMode"}]}}),e._v(" "),r("div",{staticClass:"color-gray cd-mt8"},[[e._v("自由式：学习过程自由安排;")],e._v(" "),[e._v("解锁式：根据既定顺序逐个解锁学习")]],2)],1),e._v(" "),r("a-form-item",{attrs:{label:"任务完成规则"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["enableFinish",{initialValue:"1"}],expression:"['enableFinish', {\n          initialValue: '1'\n        }]"}],attrs:{options:[{label:"无限制",value:"1"},{label:"由任务完成条件决定",value:"0"}]}}),e._v(" "),r("div",{staticClass:"color-gray cd-mt8"},[[e._v("必须达到完成条件，任务才算完成")]],2)],1),e._v(" "),"live"===e.form.getFieldValue("type")?r("a-form-item",{attrs:{label:"课程人数"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["maxStudentNum",{rules:[{required:!0,message:"请输入课程人数"},{validator:e.validateRange}]}],expression:"['maxStudentNum', { rules: [\n          { required: true, message: '请输入课程人数' },\n          { validator: validateRange },\n        ]}]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入课程人数"}},[r("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("人")])])],1):e._e(),e._v(" "),r("a-form-item",{attrs:{label:"是否可加入"}},[r("a-switch",{model:{value:e.formInfo.buyable,callback:function(t){e.$set(e.formInfo,"buyable",t)},expression:"formInfo.buyable"}}),e._v(" "),r("div",{staticClass:"color-gray cd-mt8"},[[e._v("关闭后，前台显示为“限制课程”，学员自己无法加入，需要由老师手动添加学员。常用于封闭型教学。")]],2)],1),e._v(" "),r("a-form-item",{attrs:{label:"加入截止日期"}},[r("div",{staticStyle:{overflow:"hidden"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["enableBuyExpiryTime",{initialValue:"0",rules:[{required:!0,message:"请输入加入截止日期"}]}],expression:"['enableBuyExpiryTime', {\n            initialValue: '0',\n            rules: [{ required: true, message: '请输入加入截止日期' }]\n          }]"}],staticClass:"pull-left mt12",attrs:{options:[{label:"不限制",value:"0"},{label:"自定义",value:"1"}]}}),e._v(" "),"1"===e.form.getFieldValue("enableBuyExpiryTime")?r("a-form-item",{staticClass:"pull-left",staticStyle:{margin:"4px 0 0"}},[r("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["buyExpiryTime",{rules:[{required:!0,message:"请输入加入截止日期"}]}],expression:"['buyExpiryTime', {\n              rules: [{ required: true, message: '请输入加入截止日期' }]\n            }]"}],attrs:{placeholder:""}})],1):e._e()],1)]),e._v(" "),r("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"学习有效期"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["expiryMode",{initialValue:"forever"}],expression:"['expiryMode', { initialValue: 'forever' }]"}],attrs:{options:[{label:"随到随学",value:"days"},{label:"固定周期",value:"date"},{label:"长期有效",value:"forever"}]}}),e._v(" "),r("a-tooltip",{attrs:{overlayClassName:"expand-tooltip"}},[r("template",{slot:"title"},[e._v("\n          随到随学：有效期从学员加入的当天开始算起，截至到期当天晚上的23:59"),r("br"),e._v("\n          固定周期：有固定的学习开始日期和结束日期"),r("br"),e._v("\n          过期后无法继续学习，系统会在到期前10天提醒学员。\n        ")]),e._v(" "),r("a",[r("a-icon",{staticStyle:{"margin-left":"-6px"},attrs:{type:"question-circle"}})],1)],2)],1),e._v(" "),"days"===e.form.getFieldValue("expiryMode")?r("a-form-item",{staticStyle:{position:"relative",left:"12.5%"}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["deadlineType",{initialValue:"days"}],expression:"['deadlineType', { initialValue: 'days' }]"}],attrs:{options:[{label:"按截止日期",value:"end_date"},{label:"按有效天数",value:"days"}]}}),e._v(" "),"end_date"===e.form.getFieldValue("deadlineType")?r("a-form-item",[r("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["deadline",{rules:[{validator:e.requiredValidator,message:"请输入截止日期"}]}],expression:"['deadline', {\n            rules: [{ validator: requiredValidator, message: '请输入截止日期' }]\n          }]"}]}),e._v(" "),r("span",{staticClass:"ml8"},[e._v("在此日期前，学员可进行学习。")])],1):r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["expiryDays",{rules:[{required:!0,message:"请输入有效期天数"}]}],expression:"['expiryDays', {\n            rules: [{ required: true, message: '请输入有效期天数' }]\n          }]"}],staticStyle:{width:"200px"}}),e._v(" "),r("span",{staticClass:"ml8"},[e._v("从加入当天起，在几天内可进行学习。")])],1)],1):e._e(),e._v(" "),"date"===e.form.getFieldValue("expiryMode")?r("a-form-item",{staticStyle:{position:"relative",left:"12.5%",overflow:"hidden"}},[r("a-form-item",{staticClass:"pull-left"},[r("span",{staticClass:"mr8"},[e._v("开始日期")]),e._v(" "),r("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["expiryStartDate",{rules:[{required:!0,message:"请输入开始日期"}]}],expression:"['expiryStartDate', {\n          rules: [{ required: true, message: '请输入开始日期' }]\n        }]"}]})],1),e._v(" "),r("a-form-item",{staticClass:"pull-left ml12"},[r("span",{staticClass:"mr8"},[e._v("结束日期")]),e._v(" "),r("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["expiryEndDate",{rules:[{required:!0,message:"请输入结束日期"}]}],expression:"['expiryEndDate', {\n          rules: [{ required: true, message: '请输入结束日期' }]\n        }]"}]})],1)],1):e._e()],1),e._v(" "),r("div",{staticClass:"create-course-btn-group"},[r("a-button",{staticClass:"save-course-btn",attrs:{type:"primary",loading:e.ajaxLoading},on:{click:e.saveCourseSet}},[e._v("创建课程")]),e._v(" "),r("a-button",{on:{click:function(t){return e.goToMultiClassCreatePage()}}},[e._v("取消")])],1),e._v(" "),r("a-modal",{key:e.cropModal,attrs:{visible:e.cropModalVisible},on:{cancel:function(t){e.cropModalVisible=!1,e.courseCoverUrl=""}}},[r("vue-cropper",{ref:"cropper",attrs:{"aspect-ratio":16/9,src:e.imgUrl}}),e._v(" "),r("template",{slot:"footer"},[r("a-button",{on:{click:e.reSelectCourseCover}},[e._v("重新选择")]),e._v(" "),r("a-button",{attrs:{type:"primary",loading:e.uploading},on:{click:e.saveCourseCover}},[e._v("保存图片")])],1)],2)],1)}),[],!1,null,"eec0caba",null);t.default=M.exports},1652:function(e,t,r){},1653:function(e,t,r){"use strict";var a={name:"AsideLayout",props:{breadcrumbs:{type:Array,required:!0},headerTitle:{type:String,default:""},headerTip:{type:String,default:""},titleTip:{type:String,default:""}}},i=(r(1654),r(22)),n=Object(i.a)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"aside-layout"},[r("div",{staticClass:"aside-layout-header"},[r("a-breadcrumb",{staticClass:"pull-left aside-layout-header__breadcrumb",attrs:{separator:"/"}},e._l(e.breadcrumbs,(function(t,a){return r("a-breadcrumb-item",{key:a},[t.href?[r("a",{attrs:{href:t.href,target:"_blank"}},[e._v(e._s(t.name))])]:t.pathName?[r("a",{attrs:{href:"javascript:;"},on:{click:function(r){return e.$router.push({name:t.pathName})}}},[e._v(e._s(t.name))])]:[e._v("\n          "+e._s(t.name)+"\n        ")]],2)})),1),e._v(" "),e.headerTip?r("a-popover",{attrs:{placement:"bottomLeft"}},[r("template",{slot:"content"},[r("div",{staticClass:"aside-header-tip",domProps:{innerHTML:e._s(e.headerTip)}})]),e._v(" "),r("span",{staticClass:"aside-header-title-icon"},[r("a-icon",{attrs:{theme:"filled",type:"question-circle"}}),r("span",{staticClass:"icon-circle"},[e._v(e._s(e.headerTitle))])],1)],2):e._e(),e._v(" "),e.titleTip?r("span",{staticClass:"aside-header-title-icon"},[e._v(e._s(e.titleTip))]):e._e()],1),e._v(" "),r("div",{staticClass:"aside-layout-main"},[e._t("default")],2)])}),[],!1,null,null,null);t.a=n.exports},1654:function(e,t,r){"use strict";var a=r(1652);r.n(a).a},1779:function(e,t,r){},1959:function(e,t,r){"use strict";var a=r(1779);r.n(a).a}}]);